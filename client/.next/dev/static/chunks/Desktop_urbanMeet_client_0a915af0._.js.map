{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/underxcore/Desktop/urbanMeet/client/lib/api.ts"],"sourcesContent":["import axios from 'axios'\n\nconst API = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:4000/api',\n  headers: { 'Content-Type': 'application/json' },\n})\n\n// Attach Authorization header automatically from localStorage\nAPI.interceptors.request.use((config) => {\n  if (typeof window !== 'undefined') {\n    const token = localStorage.getItem('token')\n    if (token) {\n      config.headers = config.headers || {}\n      config.headers['Authorization'] = `Bearer ${token}`\n    }\n  }\n  return config\n})\n\nexport default API\n"],"names":[],"mappings":";;;;AAGW;AAHX;;AAEA,MAAM,MAAM,qLAAK,CAAC,MAAM,CAAC;IACvB,SAAS,6MAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;IAC5C,SAAS;QAAE,gBAAgB;IAAmB;AAChD;AAEA,8DAA8D;AAC9D,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,wCAAmC;QACjC,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,OAAO,OAAO,GAAG,OAAO,OAAO,IAAI,CAAC;YACpC,OAAO,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QACrD;IACF;IACA,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/underxcore/Desktop/urbanMeet/client/app/events/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\nimport React, { useState } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport API from '@/lib/api'\n\nasync function fetchEvent(id: string) {\n  const res = await API.get(`/events/${id}`)\n  return res.data.event\n}\n\nasync function fetchComments(id: string) {\n  const res = await API.get(`/${id}/comments`)\n  return res.data.comments\n}\n\nexport default function EventPage({ params }: { params: { id: string } }) {\n  const { id } = params\n  const queryClient = useQueryClient()\n  const { data: event, isLoading } = useQuery({ queryKey: ['event', id], queryFn: () => fetchEvent(id) })\n  const { data: comments = [] } = useQuery({ queryKey: ['comments', id], queryFn: () => fetchComments(id) })\n  const [commentText, setCommentText] = useState('')\n  const [editing, setEditing] = useState(false)\n  const [title, setTitle] = useState('')\n  const [description, setDescription] = useState('')\n  const [startsAt, setStartsAt] = useState('')\n  const [city, setCity] = useState('')\n  const [venue, setVenue] = useState('')\n  const [imageUrl, setImageUrl] = useState('')\n  const [tags, setTags] = useState<string>('')\n\n  const rsvpMutation = useMutation({\n    mutationFn: async (status: string) => {\n      const token = localStorage.getItem('token')\n      if (!token) throw new Error('Not logged in')\n      await API.post(`/events/${id}/rsvp?status=${status}`, {}, { headers: { Authorization: `Bearer ${token}` } })\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['event', id] })\n      alert('RSVP updated!')\n    }\n  })\n\n  const commentMutation = useMutation({\n    mutationFn: async (content: string) => {\n      const token = localStorage.getItem('token')\n      if (!token) throw new Error('Not logged in')\n      await API.post(`/${id}/comments`, { content }, { headers: { Authorization: `Bearer ${token}` } })\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['comments', id] })\n      setCommentText('')\n    }\n  })\n\n  if (isLoading) return <div className=\"p-6 text-white\">Loading...</div>\n  if (!event) return <div className=\"p-6 text-white\">Event not found</div>\n\n  // Initialize edit form when toggling\n  const startEdit = () => {\n    setEditing(true)\n    setTitle(event.title || '')\n    setDescription(event.description || '')\n    setStartsAt(event.startsAt?.slice(0, 16) || '')\n    setCity(event.city || '')\n    setVenue(event.venue || '')\n    setImageUrl(event.imageUrl || '')\n    setTags(Array.isArray(event.tags) ? event.tags.join(', ') : '')\n  }\n\n  const saveEdit = async () => {\n    const token = localStorage.getItem('token')\n    if (!token) return alert('Not logged in')\n    try {\n      await API.patch(`/events/${id}`, { title, description, startsAt, city, venue, imageUrl, tags })\n      setEditing(false)\n      queryClient.invalidateQueries({ queryKey: ['event', id] })\n    } catch (err: any) {\n      alert(err?.response?.data?.error || 'Failed to update')\n    }\n  }\n\n  const deleteEvent = async () => {\n    const token = localStorage.getItem('token')\n    if (!token) return alert('Not logged in')\n    if (!confirm('Delete this event?')) return\n    try {\n      await API.delete(`/events/${id}`)\n      alert('Event deleted')\n      // Navigate back to home\n      window.location.href = '/'\n    } catch (err: any) {\n      alert(err?.response?.data?.error || 'Failed to delete')\n    }\n  }\n\n  return (\n    <div className=\"mx-auto max-w-4xl p-6\">\n      <div className=\"rounded-xl bg-white/10 p-6 backdrop-blur-md\">\n        {event.imageUrl && (\n          <img src={event.imageUrl} alt={event.title} className=\"mb-4 h-64 w-full object-cover rounded-xl border border-white/10\" />\n        )}\n        <div className=\"flex items-start justify-between gap-4\">\n          <div>\n            <h2 className=\"text-3xl font-semibold text-white\">{event.title}</h2>\n            <p className=\"mt-2 text-zinc-300\">{event.description}</p>\n            {Array.isArray(event.tags) && event.tags.length > 0 && (\n              <div className=\"mt-3 flex flex-wrap gap-2\">\n                {event.tags.map((tag: string) => (\n                  <span key={tag} className=\"rounded-full bg-pink-500/20 px-3 py-1 text-xs text-pink-300 border border-pink-500/40 backdrop-blur-sm\">{tag}</span>\n                ))}\n              </div>\n            )}\n          </div>\n          <div className=\"flex gap-2\">\n            <button onClick={startEdit} className=\"rounded border border-pink-500 px-3 py-1.5 text-sm text-pink-500 hover:bg-pink-500/10\">Edit</button>\n            <button onClick={deleteEvent} className=\"rounded bg-red-500 px-3 py-1.5 text-sm text-white hover:bg-red-600\">Delete</button>\n          </div>\n        </div>\n        <div className=\"mt-4 space-y-1 text-sm text-zinc-400\">\n          <p><strong>When:</strong> {new Date(event.startsAt).toLocaleString()}</p>\n          <p><strong>Where:</strong> {event.city} — {event.venue}</p>\n          <p><strong>Attendees:</strong> {event.attendees?.length || 0} going</p>\n        </div>\n        <div className=\"mt-4 flex gap-2\">\n          <button onClick={() => rsvpMutation.mutate('going')} className=\"rounded bg-pink-500 px-4 py-2 text-sm text-white hover:bg-pink-600\">\n            RSVP: Going\n          </button>\n          <button onClick={() => rsvpMutation.mutate('interested')} className=\"rounded border border-pink-500 px-4 py-2 text-sm text-pink-500 hover:bg-pink-500/10\">\n            Interested\n          </button>\n        </div>\n        {editing && (\n          <div className=\"mt-6 rounded-xl border border-white/10 bg-white/5 p-4\">\n            <h4 className=\"mb-3 text-lg font-semibold text-white\">Edit Event</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <input value={title} onChange={(e) => setTitle(e.target.value)} placeholder=\"Title\" className=\"rounded border border-white/30 bg-white/10 px-3 py-2 text-white\" />\n              <input type=\"datetime-local\" value={startsAt} onChange={(e) => setStartsAt(e.target.value)} className=\"rounded border border-white/30 bg-white/10 px-3 py-2 text-white\" />\n              <input value={city} onChange={(e) => setCity(e.target.value)} placeholder=\"City\" className=\"rounded border border-white/30 bg-white/10 px-3 py-2 text-white\" />\n              <input value={venue} onChange={(e) => setVenue(e.target.value)} placeholder=\"Venue\" className=\"rounded border border-white/30 bg-white/10 px-3 py-2 text-white\" />\n              <input value={imageUrl} onChange={(e) => setImageUrl(e.target.value)} placeholder=\"Image URL\" className=\"md:col-span-2 rounded border border-white/30 bg-white/10 px-3 py-2 text-white\" />\n              <input value={tags} onChange={(e) => setTags(e.target.value)} placeholder=\"Tags (comma separated)\" className=\"md:col-span-2 rounded border border-white/30 bg-white/10 px-3 py-2 text-white\" />\n            </div>\n            <textarea value={description} onChange={(e) => setDescription(e.target.value)} placeholder=\"Description\" rows={4} className=\"mt-3 w-full rounded border border-white/30 bg-white/10 px-3 py-2 text-white\" />\n            <div className=\"mt-3 flex gap-2 justify-end\">\n              <button onClick={() => setEditing(false)} className=\"rounded border border-white/30 bg-white/10 px-4 py-2 text-white\">Cancel</button>\n              <button onClick={saveEdit} className=\"rounded bg-pink-500 px-4 py-2 text-sm text-white hover:bg-pink-600\">Save</button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <section className=\"mt-8\">\n        <h3 className=\"text-xl font-semibold text-white\">Comments</h3>\n        <div className=\"mt-4 space-y-3\">\n          {comments.map((c: any) => (\n            <div key={c.id} className=\"rounded bg-white/10 p-3\">\n              <p className=\"text-sm text-white\">{c.content}</p>\n              <p className=\"mt-1 text-xs text-zinc-400\">{c.user?.name || 'Anonymous'} • {new Date(c.createdAt).toLocaleString()}</p>\n            </div>\n          ))}\n        </div>\n        <div className=\"mt-4 flex gap-2\">\n          <input\n            value={commentText}\n            onChange={(e) => setCommentText(e.target.value)}\n            placeholder=\"Add a comment...\"\n            className=\"flex-1 rounded border border-white/30 bg-white/10 px-3 py-2 text-white placeholder:text-white/60\"\n          />\n          <button onClick={() => commentMutation.mutate(commentText)} className=\"rounded bg-pink-500 px-4 py-2 text-sm text-white hover:bg-pink-600\">\n            Post\n          </button>\n        </div>\n      </section>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}